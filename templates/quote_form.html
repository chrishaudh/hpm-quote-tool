<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Get a Fast Quote – Hawkins Pro Mounting</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      max-width: 700px;
      margin: 0 auto;
      padding: 1.5rem;
      background-color: #f7f7f7;
    }
    header {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }
    header img {
      max-width: 200px;
      height: auto;
      display: block;
    }
    h1 {
      font-size: 1.6rem;
      margin-bottom: 0.25rem;
      text-align: center;
    }
    p.lead {
      margin-bottom: 1.5rem;
      color: #555;
      text-align: center;
    }
    form {
      background: #fff;
      border-radius: 0.75rem;
      padding: 1.25rem 1.5rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.04);
      display: grid;
      gap: 1rem;
    }
    h2.section-title {
      font-size: 1.1rem;
      margin: 1rem 0 0.25rem;
    }
    h3.section-subtitle {
      font-size: 0.95rem;
      margin: 0.25rem 0 0.5rem;
      color: #666;
      font-weight: 500;
    }
    label {
      font-weight: 600;
      display: block;
      margin-bottom: 0.25rem;
      font-size: 0.9rem;
    }
    input,
    select,
    textarea {
      width: 100%;
      padding: 0.5rem;
      border-radius: 0.4rem;
      border: 1px solid #ccc;
      font-size: 0.95rem;
      box-sizing: border-box;
    }
    input[type="checkbox"] {
      width: auto;
    }
    .field-group {
      display: grid;
      gap: 0.4rem;
    }
    .two-col {
      display: grid;
      gap: 0.75rem;
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
    .card {
      border-radius: 0.75rem;
      padding: 0.9rem 1rem;
      background: #fafafa;
      border: 1px solid #e3e3e3;
      margin-top: 0.25rem;
    }
    .checkbox-row {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin: 0.25rem 0;
      font-size: 0.9rem;
    }
    .checkbox-row label {
      margin: 0;
      font-weight: 500;
    }
    button {
      padding: 0.8rem 1.25rem;
      border-radius: 999px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      background: #2563eb;
      color: #fff;
      font-size: 1rem;
      margin-top: 0.5rem;
    }
    button:hover {
      background: #1d4ed8;
    }
    .hint {
      font-size: 0.8rem;
      color: #6b7280;
    }
    .optional-note {
      font-size: 0.85rem;
      color: #6b7280;
      margin-bottom: 0.25rem;
    }
    @media (max-width: 640px) {
      .two-col {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <header>
    <img src="/static/hpm-logo.png" alt="Hawkins Pro Mounting logo" />
    <h1>Get a Fast Quote</h1>
    <p class="lead">
      Tell me what you need done. You can mix and match multiple services in one visit
      (TV mounting, picture & art hanging, shelves, closet shelving, and curtains/blinds/decor).
    </p>
  </header>

  <form method="post" action="/quote-html">
    <!-- Contact Info -->
    <section>
      <h2 class="section-title">Your Info</h2>
      <div class="two-col">
        <div class="field-group">
          <label for="contact_name">Name</label>
          <input id="contact_name" name="contact_name" type="text" />
        </div>
        <div class="field-group">
          <label for="contact_phone">Phone</label>
          <input id="contact_phone" name="contact_phone" type="tel" />
        </div>
      </div>
      <div class="field-group">
        <label for="contact_email">Email</label>
        <input id="contact_email" name="contact_email" type="email" />
      </div>
      <div class="two-col">
        <div class="field-group">
          <label for="zip_code">ZIP Code</label>
          <input id="zip_code" name="zip_code" type="text" value="20735" />
        </div>
        <div class="field-group">
          <label for="preferred_contact">Preferred contact method</label>
          <select id="preferred_contact" name="preferred_contact">
            <option value="">No preference</option>
            <option value="phone">Phone call</option>
            <option value="text">Text message</option>
            <option value="email">Email</option>
          </select>
        </div>
      </div>
    </section>

    <!-- Primary Service -->
    <section>
      <h2 class="section-title">Main Service for This Visit</h2>
      <p class="hint">
        This just helps label the job. Your main service will show first. You can add other services below.
      </p>
      <div class="field-group">
        <label for="service">Primary service</label>
        <select id="service" name="service">
          <option value="tv_mounting">TV Mounting</option>
          <option value="picture_hanging">Picture &amp; Art Hanging</option>
          <option value="floating_shelves">Floating Shelves</option>
          <option value="closet_shelving">Closet Shelving / Organizers</option>
          <option value="decor">Curtains / Blinds / Decor</option>
        </select>
      </div>
    </section>

    <!-- Primary service details (always shown first) -->
    <section id="primary-service-details">
      <!-- JS will move the selected service section here -->
    </section>

    <!-- Optional services list + sections -->
    <section id="optional-services">
      <h2 class="section-title">Add Other Services (Optional)</h2>
      <p class="optional-note">
        Check any additional services you’d like done in the same visit. Their details will appear below.
      </p>

      <div class="card" id="optional-service-checkboxes">
        <!-- JS will render the service checkboxes here -->
      </div>

      <div id="optional-service-details">
        <!-- JS will move non-primary service sections here -->
      </div>
    </section>

    <!-- === SERVICE SECTIONS (TV, Pictures, Shelves, Closet, Curtains/Blinds/Decor) === -->

    <!-- TV Mounting -->
    <section id="section-tv" data-service-key="tv_mounting" class="service-section">
      <h2 class="section-title">TV Mounting</h2>
      <h3 class="section-subtitle">
        A basic TV mounting under 60" is about $60; 60" or larger is about $70 before wall type & add-ons.
      </h3>
      <div class="card">
              <div class="field-group">
        <label for="tv_count">How many TVs?</label>
        <input
          id="tv_count"
          name="tv_count"
          type="number"
          min="0"
          value="1"
        />
      </div>
      
        <div class="two-col">
          <div class="field-group">
            <label for="tv_size">TV size (inches)</label>
            <input id="tv_size" name="tv_size" type="number" min="0" />
          </div>
          <div class="field-group">
            <label for="wall_type">Wall type</label>
            <select id="wall_type" name="wall_type">
              <option value="drywall">Drywall</option>
              <option value="brick">Brick</option>
              <option value="concrete">Concrete</option>
              <option value="tile/stone">Tile / Stone</option>
            </select>
          </div>
        </div>

        <div class="field-group">
          <label for="conceal_type">Wire concealment</label>
          <select id="conceal_type" name="conceal_type">
            <option value="none">No wire concealment</option>
            <option value="on_wall">On-wall raceway</option>
            <option value="in_wall">In-wall concealment</option>
          </select>
        </div>

        <div class="two-col">
          <div class="checkbox-row">
            <input id="soundbar" name="soundbar" type="checkbox" value="true" />
            <label for="soundbar">Include soundbar installation</label>
          </div>
          <div class="checkbox-row">
            <input id="led" name="led" type="checkbox" value="true" />
            <label for="led">LED backlighting</label>
          </div>
        </div>

        <div class="field-group" style="margin-top:0.5rem;">
          <label for="tv_remove_count">
            How many TVs are being removed?
            <span style="font-weight:400;">
              (This includes items being relocated or replaced)
            </span>
          </label>
          <input
            id="tv_remove_count"
            name="tv_remove_count"
            type="number"
            min="0"
            value="0"
          />
        </div>
      </div>
    </section>

    <!-- Picture & Art Hanging -->
    <section id="section-pictures" data-service-key="picture_hanging" class="service-section">
      <h2 class="section-title">Picture &amp; Art Hanging</h2>
      <h3 class="section-subtitle">
        1–2 pieces ≈ $30, 3–5 ≈ $60, 6–8 ≈ $90. Every 3 pieces after 2 increases the estimate.
      </h3>
      <div class="card">
        <div class="field-group">
          <label for="picture_count">Total number of pictures / art pieces</label>
          <input id="picture_count" name="picture_count" type="number" min="0" value="0" />
        </div>

        <div class="field-group" style="margin-top:0.5rem;">
          <label for="large_picture_count">
            How many pieces are 5 ft or wider?
          </label>
          <input
            id="large_picture_count"
            name="large_picture_count"
            type="number"
            min="0"
            value="0"
          />
          <p class="hint">
            Larger pieces usually need extra time and may add a small charge (e.g., every 1–2 large pieces).
          </p>
        </div>

        <div class="checkbox-row" style="margin-top:0.5rem;">
          <input id="gallery_wall" name="gallery_wall" type="checkbox" value="true" />
          <label for="gallery_wall">Gallery wall?</label>
        </div>
      </div>
    </section>

    <!-- Floating Shelves -->
    <section id="section-shelves" data-service-key="floating_shelves" class="service-section">
      <h2 class="section-title">Floating Shelves</h2>
      <h3 class="section-subtitle">
        Floating shelves are priced roughly in pairs of shelves (with a $60 minimum).
      </h3>
      <div class="card">
        <!-- Hidden flag that the backend already expects ('shelves' boolean) -->
        <input type="hidden" id="shelves_flag" name="shelves" value="false" />

        <div class="field-group">
          <label for="shelves_count">How many floating shelves are being installed?</label>
          <input
            id="shelves_count"
            name="shelves_count"
            type="number"
            min="0"
            value="0"
          />
        </div>

        <div class="field-group" style="margin-top:0.5rem;">
          <label for="shelves_remove_count">
            How many floating shelves are being removed?
            <span style="font-weight:400;">
              (This includes items being relocated or replaced)
            </span>
          </label>
          <input
            id="shelves_remove_count"
            name="shelves_remove_count"
            type="number"
            min="0"
            value="0"
          />
        </div>
      </div>
    </section>

    <!-- Closet Shelving / Organizers -->
    <section id="section-closet" data-service-key="closet_shelving" class="service-section">
      <h2 class="section-title">Closet Shelving / Organizers</h2>
      <h3 class="section-subtitle">
        I can install closet shelving you already have, or purchase it for you and install it.
      </h3>
      <div class="card">
        <!-- Hidden flag the backend already expects ('closet_shelving' boolean) -->
        <input type="hidden" id="closet_flag" name="closet_shelving" value="false" />

        <div class="field-group">
          <label for="closet_shelf_count">
            Approximate number of closet shelves to install
          </label>
          <input
            id="closet_shelf_count"
            name="closet_shelf_count"
            type="number"
            min="0"
            value="0"
          />
        </div>

        <div class="checkbox-row" style="margin-top:0.5rem;">
          <input
            id="closet_needs_materials"
            name="closet_needs_materials"
            type="checkbox"
            value="true"
          />
          <label for="closet_needs_materials">
            I need you to purchase the closet shelves for me
          </label>
        </div>

        <div class="checkbox-row" style="margin-top:0.25rem;">
          <input
            id="closet_shelf_not_sure"
            name="closet_shelf_not_sure"
            type="checkbox"
            value="true"
          />
          <label for="closet_shelf_not_sure">
            I’m not sure yet on the exact number of shelves
          </label>
        </div>

        <div class="field-group" style="margin-top:0.5rem;">
          <label for="closet_remove_count">
            How many existing closet shelves are being removed?
            <span style="font-weight:400;">
              (This includes items being relocated or replaced)
            </span>
          </label>
          <input
            id="closet_remove_count"
            name="closet_remove_count"
            type="number"
            min="0"
            value="0"
          />
        </div>
      </div>
    </section>

    <!-- Curtains / Blinds / Decor -->
    <section id="section-curtains" data-service-key="decor" class="service-section">
      <h2 class="section-title">Curtains / Blinds / Decor</h2>
      <h3 class="section-subtitle">
        This covers installing curtains, blinds, and decor to complete your space
        (with a $60 minimum when this service is included).
      </h3>
      <div class="card">
        <div class="field-group">
          <label for="decor_count">
            How many curtains, blinds, or decor pieces are being installed?
          </label>
          <input
            id="decor_count"
            name="decor_count"
            type="number"
            min="0"
            value="0"
          />
        </div>

        <div class="field-group" style="margin-top:0.5rem;">
          <label for="decor_remove_count">
            How many curtains or blinds are being removed?
            <span style="font-weight:400;">
              (This includes items being relocated or replaced)
            </span>
          </label>
          <input
            id="decor_remove_count"
            name="decor_remove_count"
            type="number"
            min="0"
            value="0"
          />
        </div>
      </div>
    </section>

    <!-- Job Details -->
    <section>
      <h2 class="section-title">Job Details</h2>
      <div class="card">
        <div class="checkbox-row">
          <input id="ladder_required" name="ladder_required" type="checkbox" value="true" />
          <label for="ladder_required">Ladder required?</label>
        </div>
        <div class="field-group" style="margin-top:0.5rem;">
          <label for="parking_notes">Parking / building access notes (optional)</label>
          <textarea
            id="parking_notes"
            name="parking_notes"
            rows="2"
            placeholder="Gate codes, parking garages, loading docks, concierge, etc."
          ></textarea>
        </div>
      </div>
    </section>

    <!-- Visit modifiers -->
    <section>
      <h2 class="section-title">Timing Preferences</h2>
      <div class="card">
        <div class="two-col">
          <div class="checkbox-row">
            <input id="same_day" name="same_day" type="checkbox" value="true" />
            <label for="same_day">
              I’m hoping for same-day service if available
            </label>
          </div>
          <div class="checkbox-row">
            <input id="after_hours" name="after_hours" type="checkbox" value="true" />
            <label for="after_hours">
              I’m flexible on evenings / after 5 PM
            </label>
          </div>
        </div>
        <p class="hint" style="margin-top:0.25rem;">
          Final scheduling and any after-hours pricing adjustments are confirmed at booking.
        </p>
      </div>
    </section>

    <button type="submit">Get My Estimate</button>
  </form>

  <script>
    // ---- Dynamic primary vs optional services ----

    const serviceSelect = document.getElementById("service");
    const primaryDetailsContainer = document.getElementById("primary-service-details");
    const optionalCheckboxesContainer = document.getElementById("optional-service-checkboxes");
    const optionalDetailsContainer = document.getElementById("optional-service-details");

    const serviceSections = {
      tv_mounting: document.getElementById("section-tv"),
      picture_hanging: document.getElementById("section-pictures"),
      floating_shelves: document.getElementById("section-shelves"),
      closet_shelving: document.getElementById("section-closet"),
      decor: document.getElementById("section-curtains"),
    };

    const serviceLabels = {
      tv_mounting: "TV Mounting",
      picture_hanging: "Picture & Art Hanging",
      floating_shelves: "Floating Shelves",
      closet_shelving: "Closet Shelving / Organizers",
      decor: "Curtains / Blinds / Decor",
    };

    // Keep track of which optional services are currently selected
    const selectedOptionals = new Set();

    function updateServiceLayout() {
      const primary = serviceSelect.value || "tv_mounting";

      // Move primary section to the primary container
      primaryDetailsContainer.innerHTML = "";
      const primarySection = serviceSections[primary];
      if (primarySection) {
        primaryDetailsContainer.appendChild(primarySection);
        primarySection.style.display = "block";
      }

      // Ensure primary is not in optional set
      selectedOptionals.delete(primary);

      // Rebuild optional service checkboxes
      renderOptionalCheckboxes(primary);

      // Move remaining sections to optional container and show/hide accordingly
      optionalDetailsContainer.innerHTML = "";
      Object.entries(serviceSections).forEach(([key, section]) => {
        if (!section) return;
        if (key === primary) return;

        optionalDetailsContainer.appendChild(section);
        const isSelected = selectedOptionals.has(key);
        section.style.display = isSelected ? "block" : "none";
      });

      syncServiceFlags(primary);
    }

    function renderOptionalCheckboxes(primary) {
      optionalCheckboxesContainer.innerHTML = "";

      Object.entries(serviceSections).forEach(([key, section]) => {
        if (!section || key === primary) return;

        const row = document.createElement("div");
        row.className = "checkbox-row";

        const id = `optional_${key}`;
        const input = document.createElement("input");
        input.type = "checkbox";
        input.id = id;
        input.dataset.serviceKey = key;
        input.value = "true";
        if (selectedOptionals.has(key)) {
          input.checked = true;
        }

        input.addEventListener("change", () => {
          if (input.checked) {
            selectedOptionals.add(key);
          } else {
            selectedOptionals.delete(key);
          }
          const section = serviceSections[key];
          if (section) {
            section.style.display = input.checked ? "block" : "none";
          }
          syncServiceFlags(serviceSelect.value);
        });

        const label = document.createElement("label");
        label.htmlFor = id;
        label.textContent = serviceLabels[key];

        row.appendChild(input);
        row.appendChild(label);
        optionalCheckboxesContainer.appendChild(row);
      });
    }

    // Keep backend boolean flags (shelves, closet_shelving) in sync
    function syncServiceFlags(primary) {
      const activeKeys = new Set(selectedOptionals);
      activeKeys.add(primary);

      const shelvesHidden = document.getElementById("shelves_flag");
      if (shelvesHidden) {
        shelvesHidden.value = activeKeys.has("floating_shelves") ? "true" : "false";
      }

      const closetHidden = document.getElementById("closet_flag");
      if (closetHidden) {
        closetHidden.value = activeKeys.has("closet_shelving") ? "true" : "false";
      }
    }

    // Initialize layout on load
    updateServiceLayout();
    serviceSelect.addEventListener("change", updateServiceLayout);
  </script>
</body>
</html>
